<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Immersive Experience | Production Ready</title>
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;700&display=swap" rel="stylesheet">
    
    <!-- GSAP (Core Animation Engine) -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
<style>
    /* --- RESET & BASE --- */
    * { margin: 0; padding: 0; box-sizing: border-box; }
    html, body { 
        width: 100%; height: 100%; 
        background-color: #000; 
        overflow: hidden; /* Evita scroll durante la experiencia */
        font-family: sans-serif;
    }

    /* --- LOADER --- */
    #loader {
        position: fixed; top: 0; left: 0; width: 100%; height: 100%;
        background: #000; z-index: 999;
        display: flex; justify-content: center; align-items: center;
        color: #fff; text-transform: uppercase; letter-spacing: 2px; font-size: 12px;
        transition: opacity 0.5s ease;
        pointer-events: none;
    }

    /* --- ESCENARIO PRINCIPAL --- */
    .hero-immersive {
        position: relative;
        width: 100vw;
        height: 100vh;
    }

    .video-container {
        position: absolute; top: 0; left: 0; width: 100%; height: 100%;
    }

    /* --- CAPA DE VIDEO --- */
    video {
        position: absolute;
        top: 0; left: 0;
        width: 100%; height: 100%;
        object-fit: cover; /* Mantiene la inmersión sin deformar */
        opacity: 0;
        transition: opacity 0.6s ease; /* Crossfade suave nativo + GSAP helper */
        will-change: opacity;
    }

    video.active {
        opacity: 1;
        z-index: 2;
    }

    video.hidden {
        opacity: 0;
        z-index: 1;
    }

    /* --- CAPA DE INTERACCIÓN (SVG INVISIBLE) --- */
    .interaction-layer {
        position: absolute; top: 0; left: 0; width: 100%; height: 100%;
        z-index: 10;
        /* Se mantiene oculta hasta que arranca el loop */
        visibility: hidden; 
    }

    svg {
        width: 100%; height: 100%;
        /* IMPORTANTE: preserveAspectRatio asegura que el SVG se estire igual que el video (object-fit: cover) */
        /* Si el video es 16:9, usar 'xMidYMid slice' es crucial */
    }

    .interaction-zone {
        fill: transparent; /* Totalmente invisible */
        cursor: pointer;
        pointer-events: auto;
        transition: fill 0.3s ease;
    }

    /* Feedback visual sutil al usuario (Opcional) */
    /* Esto ayuda a descubrir que es interactivo sin romper la inmersión */
    .interaction-zone:hover {
        fill: rgba(255, 255, 255, 0.05); 
    }

    /* Clase base para los videos de hover */
    .hover-video {
        opacity: 0;
        z-index: 3; /* Encima del loop (z-index: 2) */
        transition: none; /* Dejaremos que GSAP maneje la transición */
    }
    
    /* Ajuste de capas */
    #vid-loop.active { z-index: 2; }
    #vid-transition.active { z-index: 5; } /* La transición final siempre arriba */

    /* --- CAPA CONTENEDORA DE TEXTOS --- */
/* Esta capa cubre toda la pantalla pero deja pasar los clics (pointer-events: none) */
.text-overlay-layer {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    z-index: 20; /* CRUCIAL: Debe ser mayor que el SVG (10) y los Videos (1-5) */
    pointer-events: none; 
}

/* --- ESTILO DE LOS TEXTOS (LABELS) --- */
.menu-label {
    /* --- POSICIONAMIENTO (No tocar) --- */
    position: absolute;
    cursor: pointer;
    pointer-events: auto;
    opacity: 0;
    transform: translateY(20px);

    /* --- TIPOGRAFÍA (Cinzel) --- */
    font-family: 'Cinzel', serif;
    color: #ffffff;
    font-size: 1.1rem; /* Un poco más pequeño para elegancia */
    font-weight: 700;  /* Bold para que se lea bien sobre video */
    text-transform: uppercase;
    letter-spacing: 2px;
    text-shadow: 0 2px 4px rgba(0,0,0,0.5); /* Sombra suave para legibilidad */

    /* --- CAJA DE CRISTAL (Glassmorphism) --- */
    /* Fondo Grisáceo semitransparente */
    background: rgba(40, 44, 52, 0.4); 
    
    /* El efecto de desenfoque mágico */
    backdrop-filter: blur(12px);
    -webkit-backdrop-filter: blur(12px); /* OBLIGATORIO para Safari/iPhone */
    
    /* Bordes y Forma */
    border: 1px solid rgba(255, 255, 255, 0.2); /* Borde sutil brillante */
    border-radius: 12px; /* Esquinas redondeadas */
    padding: 12px 24px;  /* Aire alrededor del texto */
    
    /* Sombra de la caja para profundidad 3D */
    box-shadow: 0 8px 32px 0 rgba(0, 0, 0, 0.37);

    /* Transiciones suaves */
    transition: background 0.3s ease, transform 0.3s ease, border-color 0.3s ease;
}

    /* --- ESTADO HOVER DEL PROPIO BOTÓN --- */
/* Cuando el usuario pone el mouse ENCIMA DEL TEXTO, lo iluminamos */
.menu-label:hover {
    background: rgba(60, 64, 72, 0.6); /* Un poco más claro */
    border-color: rgba(255, 255, 255, 0.6); /* Borde más brillante */
    transform: scale(1.05) translateY(0) !important; /* Pequeño zoom */
}
    
/* --- POSICIONES (COORDENADAS) --- */
/* Ajusta estos porcentajes (top, left, right, bottom) para mover los textos */

/* TEXTO AMARILLO (Para la cinta de la derecha) */
#text-yellow { 
    top: 30%; 
    right: 15%; 
    text-align: right; 
}

/* TEXTO AZUL (Para la cinta de la izquierda/arriba) */
#text-blue { 
    top: 25%; 
    left: 18%; 
}

/* TEXTO ROJO (Para la cinta de abajo/derecha) */
#text-red { 
    bottom: 25%; 
    right: 20%; 
    text-align: right; 
}

/* TEXTO VERDE (Para la cinta de abajo/izquierda) */
#text-green { 
    bottom: 20%; 
    left: 20%; 
}

    .hero-cta {
    position: absolute;
    top: 50%; left: 50%;
    transform: translate(-50%, -50%);
    z-index: 15; /* Debajo del menú, encima del video */
    text-align: center;
    color: white;
    pointer-events: none; /* Dejar pasar clics */
    transition: opacity 0.5s ease;
}

.hero-cta h1 {
    font-family: 'Cinzel', serif;
    font-size: 3rem;
    font-weight: 700;
    margin-bottom: 10px;
    text-shadow: 0 4px 20px rgba(0,0,0,0.8);
    letter-spacing: 4px;
}

.hero-cta p {
    font-family: 'Inter', sans-serif; /* O sans-serif limpia */
    font-size: 0.9rem;
    text-transform: uppercase;
    letter-spacing: 3px;
    opacity: 0.8;
    background: rgba(0,0,0,0.3); /* Fondo muy sutil para leer */
    padding: 8px 16px;
    border-radius: 20px;
    display: inline-block;
    backdrop-filter: blur(4px);
}

    /* Ocultar cursor nativo en el contenedor (opcional, arriesgado en UX) */
/* .hero-immersive { cursor: none; } */

.custom-cursor {
    position: fixed;
    top: 0; left: 0;
    width: 40px; height: 40px;
    border: 1px solid rgba(255,255,255,0.5);
    border-radius: 50%;
    pointer-events: none;
    z-index: 9999;
    transform: translate(-50%, -50%);
    transition: transform 0.1s ease, background 0.2s;
    mix-blend-mode: difference; /* Se ve sobre blanco y negro */
}

.custom-cursor.active {
    transform: translate(-50%, -50%) scale(1.5);
    background: rgba(255,255,255,0.2);
    border-color: white;
}
    
    
</style>
</head>
<body>
<!-- PRELOADER -->
<div id="loader">Cargando Experiencia...</div>
<section class="hero-immersive">
 <!-- CAPA DE VIDEOS -->
<div class="video-container">
    <!-- 1. INTRO -->
    <video id="vid-intro" class="active" muted playsinline preload="auto">
        <source src="https://pub-8275440e24554b96ad7dd640df0866b9.r2.dev/videos/Tejido.mp4" type="video/mp4">
    </video>

    <!-- 2. LOOP (Bucle de las cintas) -->
    <video id="vid-loop" class="hidden" loop muted playsinline preload="auto">
        <source src="https://pub-8275440e24554b96ad7dd640df0866b9.r2.dev/videos/Tejido2.mp4" type="video/mp4">
    </video>

    <!-- === CAPA DE VIDEOS HOVER === -->
<!-- Están ocultos (opacity: 0) y pausados por defecto -->

<video id="hover-yellow" class="video-layer hover-video"  muted playsinline preload="auto" data-loop-start="3" 
       data-loop-end="3.5">
    <source src="https://pub-8275440e24554b96ad7dd640df0866b9.r2.dev/videos/HoverCintaYellow.mp4" type="video/mp4">
</video>

<video id="hover-blue" class="video-layer hover-video"  muted playsinline preload="auto" data-loop-start="3" 
       data-loop-end="4">
    <source src="https://pub-8275440e24554b96ad7dd640df0866b9.r2.dev/videos/HoverCintaBlue.mp4" type="video/mp4">
</video>

<video id="hover-red" class="video-layer hover-video"  muted playsinline preload="auto" data-loop-start="3" 
       data-loop-end="4">
    <source src="https://pub-8275440e24554b96ad7dd640df0866b9.r2.dev/videos/HoverCintaRed.mp4" type="video/mp4">
</video>

<video id="hover-green" class="video-layer hover-video"  muted playsinline preload="auto" data-loop-start="3" 
       data-loop-end="4">
    <source src="https://pub-8275440e24554b96ad7dd640df0866b9.r2.dev/videos/HoverCintaGreen.mp4" type="video/mp4">
</video>
<!-- =================================== -->
    

    <!-- 4. TRANSICIÓN (Source dinámico) -->
    <video id="vid-transition" class="hidden" muted playsinline>
        <!-- Se inyecta por JS -->
    </video>
</div>

  <!-- 2. CAPA DE TEXTOS (Menú Flotante) -->
<div class="text-overlay-layer">
    <div id="text-yellow" class="menu-label" data-color="Yellow">Marketplace</div>
    <div id="text-blue"   class="menu-label" data-color="Blue">Cursos Virtuales</div>
    <div id="text-red"    class="menu-label" data-color="Red">Georeferenciación</div>
    <div id="text-green"  class="menu-label" data-color="Green">Comunidad</div>
</div>

<div id="hero-cta" class="hero-cta">
    <h1>El Origen del Tejido</h1>
    <p>Explora los hilos para descubrir nuestra historia</p>
    <div class="mouse-icon"></div> <!-- Opcional: ícono de mouse/dedo -->
</div>

    <div class="custom-cursor"></div>
    
<!-- CAPA DE INTERACCIÓN SVG -->
<!-- Ajusta el viewBox a la resolución nativa de tu video (ej: 1920 1080) -->
<div class="interaction-layer" id="interaction-layer">
    <svg viewBox="0 0 1920 1080" preserveAspectRatio="xMidYMid slice">
        
        <!-- IMPORTANTE: Reemplaza los atributos d="..." con tus trazados reales -->
        
        <!-- CINTA AMARILLA -->
        <path id="zone-yellow" class="interaction-zone" 
              data-color="Yellow" data-url="https://virtuala-soft.github.io/earth/dsc/wayuu/amarilla.html" data-text-id="text-yellow" data-hover-id="hover-yellow"
              d="M1414,412c-9-1-277,8-277,8s-307-14-307-14c0,0-293.57,8-293.29,14s-48.71,7-48.71,13,167,99,167,99l200,90,157,84,97,49,24,14-11,36s-21,41-27,41-145-45.56-144-44.78-119-40.22-119-40.22l-152-86-182-95-85-48-45-86-34-82,22.55-22.55h66.2l62.25-23.45h121.95l221.05,18,113-4s133,11,138,16,172,5,172,5l113,8h71.17l-21.17,51Z"></path>
        
        <!-- CINTA AZUL -->
        <path id="zone-blue" class="interaction-zone" 
              data-color="Blue" data-url="https://virtuala-soft.github.io/earth/dsc/wayuu/azul.html" data-text-id="text-blue" data-hover-id="hover-blue"
              d="M747,319l69.05,69.05,157.95,94.95,138,110,130,118,20.44,20.44s-95.44-15.44-102.44-15.44-96-55-96-55l-87-67-168.21-168.21-49.79-73.79-76-74-24,8,42,74,105,138,102,93,108,95,137,81,98,33,49,9,16-38-5-81-119.66-142.5-145.34-112.5-155-121-104-63-112-14-10,30,82,52Z"></path>

        <!-- CINTA ROJA -->
        <path id="zone-red" class="interaction-zone" 
              data-color="Red" data-url="https://virtuala-soft.github.io/earth/dsc/wayuu/roja.html" data-text-id="text-red" data-hover-id="hover-red"
              d="M648,814l-13-71s11-40,18-41,71-62,71-62l147-124,181-169,158-133,75-42,44,67v30.84l-128,105.16-76.15,76.15-94.85,83.85-170,138-138,106-18,45-35,12-21-22Z"></path>

        <!-- CINTA VERDE -->
        <path id="zone-green" class="interaction-zone" data-text-id="text-green" data-hover-id="hover-green"
              data-color="Green" data-url="https://virtuala-soft.github.io/earth/dsc/wayuu/verde.html"
              d="M811,820l142-74s197-80,208-85,189-100,189-100l128-86-269-37-138-24-188,32-171,36h-109.03l-37.97,1-11-45,91.38-24s217.62-29,217.62-29,183-10,179-9,206.32-1,206.32-1l144.68,7,99,3,45,19,41,59,16,53-13,53-53,40-106,62-217,104-110,51-121,40-94,28-58-28-24-36,13-10Z"></path>

    </svg>
</div>

    </section>
    
<script>
    document.addEventListener("DOMContentLoaded", () => {

        // --- LÓGICA DE BUCLE PERSONALIZADO (LOOP DESDE SEGUNDO 3) ---
        //const LOOP_START_TIME = 3; // El segundo exacto donde quieres que reinicie
        
        //document.querySelectorAll('.hover-video').forEach(video => {
            // 1. Escuchamos cuando el video termina
          //  video.addEventListener('ended', () => {
                // 2. Rebobinamos al segundo deseado
               // video.currentTime = LOOP_START_TIME;
                
                // 3. Volvemos a reproducir
                // Usamos una promesa para evitar errores si el usuario salió rápido
              //  video.play().catch(() => { /* Ignorar errores de interrupción */ });
          //  });
        //});
        
        // --- CONFIGURACIÓN ---
        const videoPathPrefix = "https://pub-8275440e24554b96ad7dd640df0866b9.r2.dev/videos/"; // Si los videos están en una carpeta, pon: "assets/videos/"
        
        // --- REFERENCIAS DOM ---
        const loader = document.getElementById('loader');
        const vidIntro = document.getElementById('vid-intro');
        const vidLoop = document.getElementById('vid-loop');
        const vidTrans = document.getElementById('vid-transition');
        const interactionLayer = document.getElementById('interaction-layer');
        const zones = document.querySelectorAll('.interaction-zone');
        const labels = document.querySelectorAll('.menu-label');

          // Opcional: Si no usas cursor personalizado, comenta la siguiente línea
        const customCursor = document.querySelector('.custom-cursor'); 
        let isTransitioning = false; // Flag para evitar dobles clics
        let activeHoverColor = null; // Para evitar conflictos de animaciones

        // --- 1. INICIALIZACIÓN ---
        // Esperamos a que el intro tenga suficiente data para reproducir
        vidIntro.addEventListener('canplaythrough', () => {
            loader.style.opacity = '0';
            setTimeout(() => loader.remove(), 600);
            vidIntro.play().catch(e => console.log("Autoplay bloqueado por navegador, requiere interacción."));
        }, { once: true });

        // Fallback por si 'canplaythrough' ya ocurrió
        if (vidIntro.readyState >= 3) {
            loader.style.opacity = '0';
            vidIntro.play();
        }

        // --- 2. ORQUESTACIÓN INTRO -> LOOP ---
      /*  vidIntro.addEventListener('ended', () => {
            // Iniciamos reproducción del loop ANTES de mostrarlo (seamless)
            vidLoop.play();

            // Crossfade
            vidIntro.classList.remove('active');
            vidIntro.classList.add('hidden');
            
            vidLoop.classList.remove('hidden');
            vidLoop.classList.add('active');

            // Activamos la capa de interacción
            interactionLayer.style.visibility = 'visible';
            
            // Animación de entrada para las zonas (opcional, mejora UX)
            gsap.fromTo(zones, 
                { autoAlpha: 0 }, 
                { autoAlpha: 1, duration: 1, ease: "power2.out" }
            );
        });*/

        
   
        const CUT_SECONDS = 8; // Cuantos segundos antes quieres cortar
        let transitionTriggered = false; // Candado para que no se dispare mil veces
        
        vidIntro.addEventListener('timeupdate', () => {
            // Si (Duración total - Tiempo actual) es menor o igual a 4 segundos...
            if (!transitionTriggered && (vidIntro.duration - vidIntro.currentTime <= CUT_SECONDS)) {
                
                transitionTriggered = true; // Bloqueamos para que ocurra solo una vez
                
                console.log("✂️ Cortando video por código e iniciando Loop");
                
                // 1. Iniciar el siguiente video inmediatamente
                vidLoop.play();
        
                // 2. Crossfade visual (GSAP)
                vidIntro.classList.remove('active');
                vidIntro.classList.add('hidden');
                
                vidLoop.classList.remove('hidden');
                vidLoop.classList.add('active');
        
                // 3. Activar interacción
                interactionLayer.style.visibility = 'visible';

                // A) Mostrar todos los textos suavemente (Cascada)
                gsap.to(".menu-label", {
                    y: 0, 
                    opacity: 1, 
                    duration: 1, 
                    stagger: 0.2, // Que aparezcan uno tras otro
                    ease: "power2.out",
                    delay: 0.5 // Espera medio segundo a que el loop se vea bien
                });

                // B) Ocultarlos automáticamente después de unos segundos
                // Esto le enseña al usuario que ahí hay texto
                gsap.to(".menu-label", {
                    y: 20, 
                    opacity: 0, 
                    duration: 1, 
                    stagger: 0.1, 
                    ease: "power2.in",
                    delay: 4.5, // 0.5 entrada + 3s de lectura + 1s salida
                    overwrite: "auto" // VITAL: Si el usuario hace hover antes, esto se cancela para no molestar
                });
                
                // 4. Detener el intro un poco después para ahorrar recursos
                setTimeout(() => vidIntro.pause(), 1000);
            }
        });

        
            // --- 3. LÓGICA PREMIUM DE INTERACCIÓN (VIDEO + TEXTO) ---
            
            // Función Maestra: ACTIVAR (Mostrar Video y Texto)
            function activateState(hoverVideoId, textId, color) {
                if (isTransitioning) return;
                activeHoverColor = color; // Marcamos quien manda

                const vid = document.getElementById(hoverVideoId);
                const txt = document.getElementById(textId);                 
    
    // ---  SI EL VIDEO YA TERMINÓ, REINICIAR DESDE 0 (O 3) ---
    // Esto asegura que si vuelves a entrar, no se quede negro o congelado al final.
    if (vid.ended || vid.paused) {
        // Opción A: Siempre desde el principio absoluto al entrar
        vid.currentTime = 0; 
        
        // Opción B: Si prefieres que al entrar YA empiece en el bucle corto
        // vid.currentTime = LOOP_START_TIME; 
    }
                

                // Sincronizar video
               // if (vidLoop.readyState > 0) vid.currentTime = vidLoop.currentTime;
                vid.play();

                // Animación Video
                gsap.to(vid, { opacity: 1, duration: 0.4, ease: "power2.out" });
                
                // Animación Texto (Slide Up + Fade In)
                gsap.to(txt, { 
                    y: 0, 
                    opacity: 1, 
                    duration: 0.5, 
                    ease: "back.out(1.7)",
                    overwrite: "auto"
                });
            }

            // Función Maestra: DESACTIVAR (Ocultar si nos vamos)
            function deactivateState(hoverVideoId, textId, color, relatedTarget) {
                // Si nos movemos hacia el texto o hacia la cinta del mismo color, NO APAGAMOS
                if (relatedTarget && (relatedTarget.id === textId || relatedTarget.dataset.color === color)) {
                    return; 
                }

                activeHoverColor = null;
                const vid = document.getElementById(hoverVideoId);
                const txt = document.getElementById(textId);

                // Ocultar Video
                gsap.to(vid, { 
                    opacity: 0, 
                    duration: 0.4, 
                    ease: "power2.out", 
                    onComplete: () => vid.pause() 
                });

                // Ocultar Texto
                gsap.to(txt, { 
                    y: 20, 
                    opacity: 0, 
                    duration: 0.3, 
                    overwrite: "auto"
                });
            }

            // --- APLICAR LOGICA A LAS CINTAS (ZONES) ---
              zones.forEach(zone => {
                const hoverVideoId = zone.dataset.hoverId;
                const textId = zone.dataset.textId;
                const color = zone.dataset.color;
                const url = zone.dataset.url;

                // EVENTO: ENTRAR (Modificado para ocultar CTA)
                zone.addEventListener('mouseenter', () => {
                    // 1. Ejecutar la lógica normal (Video + Texto menú)
                    activateState(hoverVideoId, textId, color);

                    // 2. NUEVO: Ocultar el Título Guía (#hero-cta) al tocar una cinta
                    // 'overwrite: auto' cancela animaciones previas para que no parpadee
                    gsap.to("#hero-cta", { opacity: 0, duration: 0.5, overwrite: "auto" });
                });
                
                // Salir de cinta (Igual que antes)
                zone.addEventListener('mouseleave', (e) => deactivateState(hoverVideoId, textId, color, e.relatedTarget));

                // Clic en cinta (Igual que antes)
                zone.addEventListener('click', () => triggerTransition(color, url));
            });

            // --- APLICAR LOGICA A LOS TEXTOS (LABELS) ---
            // Esto permite que el usuario vaya de la cinta al texto sin que se apague
            labels.forEach(label => {
                const color = label.dataset.color;
                // Buscamos la zona correspondiente para obtener IDs
                const zone = document.querySelector(`.interaction-zone[data-color="${color}"]`);
                const hoverVideoId = zone.dataset.hoverId;
                const textId = label.id;
                const url = zone.dataset.url;

                // Entrar en texto
                label.addEventListener('mouseenter', () => activateState(hoverVideoId, textId, color));

                // Salir de texto
                label.addEventListener('mouseleave', (e) => deactivateState(hoverVideoId, textId, color, e.relatedTarget));

                // Clic en texto
                label.addEventListener('click', () => triggerTransition(color, url));
            });
        // --- 4. LÓGICA DE TRANSICIÓN ---
        function triggerTransition(colorName, url) {
            isTransitioning = true;
            
            // Desactivar interacción inmediatamente
            interactionLayer.style.pointerEvents = 'none';

            
            // Ocultar UI
            gsap.to(".menu-label", { opacity: 0, duration: 0.2 });
            gsap.to("#hero-cta", { opacity: 0, duration: 0.2 }); // Ocultar título si sigue ahí

            // Definir fuente del video de transición
            // Estructura esperada: "https://pub-8275440e24554b96ad7dd640df0866b9.r2.dev/videos/TransitionCintaYellow.mp4"
            const videoFile = `${videoPathPrefix}TransitionCinta${colorName}.mp4`;
            vidTrans.src = videoFile;
            vidTrans.load();

            // Cuando el video de transición esté listo
            vidTrans.oncanplaythrough = () => {
                vidTrans.play();

                // Switch visual Loop -> Transición
                vidLoop.classList.remove('active');
                vidLoop.classList.add('hidden'); // Opcional: pausar vidLoop aquí para ahorrar CPU

                vidTrans.classList.remove('hidden');
                vidTrans.classList.add('active');
            };

            // --- 5. FIN Y REDIRECCIÓN ---
            vidTrans.onended = () => {
                // Fade out a negro (o blanco) antes de cambiar de página
                gsap.to(vidTrans, {
                    opacity: 0,
                    duration: 0.8,
                    onComplete: () => {
                        window.location.href = url;
                    }
                });
            };
        }

        // --- LÓGICA DE BUCLE PERSONALIZADO (START & END) ---
// Escanea todos los videos que tengan configuración de bucle
document.querySelectorAll('.hover-video[data-loop-end]').forEach(video => {
    
    video.addEventListener('timeupdate', () => {
        // Leemos los tiempos configurados en el HTML
        // Usamos parseFloat por si pones decimales (ej: 6.5)
        const loopStart = parseFloat(video.dataset.loopStart) || 0;
        const loopEnd = parseFloat(video.dataset.loopEnd);

        // Si el video llega (o se pasa) del tiempo final...
        if (loopEnd && video.currentTime >= loopEnd) {
            // ... rebobinamos al tiempo de inicio
            video.currentTime = loopStart;
             // Forzamos reproducción por si acaso
            if (video.paused) video.play();
        }
    });
});

           // --- 6. LOGICA MOUSE MOVE (CURSOR) ---
        // Esto solo funciona si agregas <div class="custom-cursor"></div> al HTML
        if(customCursor) {
            document.addEventListener('mousemove', (e) => {
                gsap.to(customCursor, { x: e.clientX, y: e.clientY, duration: 0.1 });
            });
        }
        
        // --- OPTIMIZACIÓN ---
        // Aseguramos que los videos ocultos se pausen para no consumir recursos
        // (Excepto durante los crossfades cortos)
    });
    
</script>
</body>
</html>
