<!DOCTYPE html>
<!-- CORRECCIÓN 1: Estilo en línea en HTML para evitar flash blanco antes de cargar CSS -->
<html lang="es" style="background-color: #000000; margin: 0; padding: 0; overflow: hidden;">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ULULATO | Experience</title>
    
    <!-- FUENTES -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;600&family=Space+Grotesk:wght@300;400&display=swap" rel="stylesheet">
    
    <!-- THREE.JS -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>

    <style>
        /* --- 0. RESET ABSOLUTO (Fondo Negro) --- */
        :root {
            --gold: #D4AF37;
            --white: #F4F4F4;
            --black: #000000;
            --font-serif: 'Cinzel', serif;
            --font-sans: 'Space Grotesk', sans-serif;
            --ease-lux: cubic-bezier(0.7, 0, 0.1, 1);
        }

        html, body { 
            margin: 0; padding: 0; 
            background-color: #000000 !important; /* Prioridad máxima al negro */
            color: var(--white); 
            font-family: var(--font-sans); 
            overflow: hidden; 
            height: 100vh; width: 100vw; 
        }
        
        
        * { box-sizing: border-box; cursor: none; }

        /* --- 1. FONDO DE ESTRELLAS (Canvas separado) --- */
        #loader-canvas-container {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            z-index: 1000; /* Fondo */
            background-color: #000000; /* Asegura fondo negro detrás de estrellas */
            transition: opacity 2s ease;
            pointer-events: none;
        }
        #loader-canvas-container.fade-out { opacity: 0; }

        /* --- 2. PRELOADER UI --- */
        .preloader {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            z-index: 2000; /* Encima de todo */
            display: flex; flex-direction: column; justify-content: center; align-items: center;
            pointer-events: none;
        }
        .loader-content { 
            position: relative; z-index: 2; text-align: center; 
            mix-blend-mode: difference; 
            transition: opacity 0.5s ease; 
        }
        /* Clase para desvanecer texto pero dejar estrellas */
        .preloader.text-fade-out .loader-content { opacity: 0; transform: scale(1.5); }
        
        .loader-percent { font-family: var(--font-serif); font-size: 8vw; color: var(--gold); line-height: 1; opacity: 0; animation: fadeUp 0.8s forwards; }
        .loader-text { font-family: var(--font-sans); font-size: 0.8rem; letter-spacing: 0.4em; text-transform: uppercase; color: rgba(255, 255, 255, 0.8); margin-top: 20px; }
        .loader-line-wrap { width: 0px; height: 1px; background: rgba(255, 255, 255, 0.2); margin: 30px auto 0; position: relative; transition: width 0.1s linear; }
        .loader-line-fill { position: absolute; top: 0; left: 0; height: 100%; width: 0%; background: var(--gold); box-shadow: 0 0 20px var(--gold); }

        /* --- 3. VIDEO BACKGROUND (Capa 0) --- */
        .video-container { position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: 0; background-color: #000; }
        #bg-video { 
            width: 100%; height: 100%; object-fit: cover; 
            opacity: 0; transform: scale(1.1);
            transition: opacity 1.5s ease-in, transform 3s ease-out; 
            filter: brightness(0.8) contrast(1.1);
        }
        body.reveal-video #bg-video { opacity: 1; transform: scale(1); }
        body.loaded #bg-video { filter: brightness(1); }
        .video-overlay { position: absolute; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.25); z-index: 1; }

        /* --- 4. TÚNEL WEBGL (Capa 500) --- */
        #webgl-container {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            z-index: 500; pointer-events: none;
            mix-blend-mode: screen; 
            opacity: 0; /* Invisible al inicio */
            transition: opacity 1.5s ease; /* Transición suave de entrada */
        }
        #webgl-container.active { opacity: 1; }

        /* --- 5. NEURAL VEIL (Capa 600) --- */
        #neural-canvas {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            z-index: 600; pointer-events: none; opacity: 0; transition: opacity 2s ease;
            mix-blend-mode: screen; 
        }
        body.loaded #neural-canvas { opacity: 1; }

        /* --- 6. UI ELEMENTS (Capa 800+) --- */
        .nav-bar, .hero, .scroll-indicator, .audio-toggle { opacity: 0; transition: opacity 2s ease 1s; }
        body.loaded .nav-bar, body.loaded .hero, body.loaded .scroll-indicator, body.loaded .audio-toggle { opacity: 1; }

        /* Nav Bar */
        .nav-bar { position: absolute; top: 0; width: 100%; padding: 40px 60px; display: flex; justify-content: space-between; align-items: center; z-index: 800; }
        .brand-logo-wrap { width: 70px; height: 70px; pointer-events: auto; perspective: 1000px; display: flex; align-items: center; justify-content: center; }
        .brand-logo-img { width: 100%; height: 100%; object-fit: contain; animation: rotate3D 20s linear infinite; transform-style: preserve-3d; filter: drop-shadow(0 0 5px rgba(212, 175, 55, 0.3)); }

        /* Menu Trigger */
        .menu-trigger { position: relative; background: rgba(0,0,0,0.2); border-radius: 50px; border: 1px solid rgba(255,255,255,0.3); padding: 0; width: 150px; height: 44px; display: flex; justify-content: center; align-items: center; cursor: none; pointer-events: auto; font-family: var(--font-sans); font-size: 0.75rem; letter-spacing: 0.2em; text-transform: uppercase; color: var(--white); backdrop-filter: blur(5px); }
        .trigger-text { position: relative; z-index: 2; transition: 0.5s; text-shadow: 0 2px 5px rgba(0,0,0,0.5); }
        .trigger-rings { position: absolute; top: 0; left: 0; width: 100%; height: 100%; pointer-events: none; }
        .ring { fill: none; stroke-width: 1px; rx: 22px; ry: 22px; transition: 0.5s; }
        .ring-base { stroke: rgba(255, 255, 255, 0.5); opacity: 1; }
        .ring-gold { stroke: var(--gold); stroke-dasharray: 40 280; opacity: 0; transform-origin: center; }
        .trigger-glow { position: absolute; top: 50%; left: 50%; width: 0%; height: 0%; background: radial-gradient(circle, rgba(212, 175, 55, 0.6) 0%, transparent 70%); transform: translate(-50%, -50%); transition: 0.6s; border-radius: 50%; }
        .menu-trigger:hover .trigger-text { letter-spacing: 0.4em; color: #fff; text-shadow: 0 0 15px rgba(212, 175, 55, 1); }
        .menu-trigger:hover .ring-base { opacity: 0; }
        .menu-trigger:hover .ring-gold { opacity: 1; animation: orbitRight 4s linear infinite; }
        .menu-trigger:hover .trigger-glow { width: 140%; height: 200%; opacity: 0.8; }

        /* Menu Curtain */
        .menu-curtain { position: fixed; top: 0; left: 0; width: 100vw; height: 100vh; z-index: 3000; background: radial-gradient(circle at center, rgba(0, 0, 0, 0.1) 0%, rgba(0, 0, 0, 0.95) 100%); backdrop-filter: blur(10px); display: flex; flex-direction: column; justify-content: center; align-items: center; opacity: 0; pointer-events: none; transition: opacity 0.8s var(--ease-lux); }
        .menu-curtain.active { opacity: 1; pointer-events: auto; }
        .menu-atmosphere { position: absolute; top: 0; left: 0; width: 100%; height: 100%; z-index: -1; opacity: 0; background: radial-gradient(circle at center, var(--active-color, transparent) 0%, transparent 60%); mix-blend-mode: hard-light; transition: opacity 0.6s ease; pointer-events: none; }
        .menu-list { list-style: none; padding: 0; }
        .menu-item { margin: 15px 0; overflow: visible; }
        .menu-link { text-decoration: none; display: flex; align-items: center; gap: 30px; font-family: var(--font-serif); font-size: 4rem; color: rgba(255,255,255,0.65); text-shadow: 0 4px 15px rgba(0,0,0,0.3); transition: 0.4s; transform: translateY(100%); }
        .menu-link:hover { color: #fff; transform: translateX(20px); }
        .menu-curtain.active .menu-link { transform: translateY(0); }
        .menu-curtain.active .menu-item:nth-child(1) .menu-link { transition-delay: 0.1s; }
        .menu-curtain.active .menu-item:nth-child(2) .menu-link { transition-delay: 0.2s; }
        .menu-curtain.active .menu-item:nth-child(3) .menu-link { transition-delay: 0.3s; }
        .menu-curtain.active .menu-item:nth-child(4) .menu-link { transition-delay: 0.4s; }
        
        .nav-number-wrap { position: relative; width: 40px; height: 40px; display: flex; justify-content: center; align-items: center; }
        .nav-number { font-family: var(--font-sans); font-size: 0.9rem; color: var(--gold); opacity: 0.8; z-index: 2; }
        .number-ring-svg { position: absolute; top: -5px; left: -5px; width: 50px; height: 50px; opacity: 0; transition: 0.4s; }
        .small-ring { fill: none; stroke: var(--gold); stroke-width: 1px; stroke-dasharray: 10 30; }
        .menu-link:hover .number-ring-svg { opacity: 1; animation: spinNumber 4s linear infinite; }
        
        .close-btn { position: absolute; top: 40px; right: 60px; width: 50px; height: 50px; border: 1px solid rgba(255,255,255,0.3); border-radius: 50%; display: flex; justify-content: center; align-items: center; color: var(--white); transition: 0.3s; cursor: none; z-index: 100; }
        .close-btn:hover { border-color: var(--gold); color: var(--gold); transform: rotate(90deg); }

        /* Hero */
        .hero { position: absolute; top: 0; left: 0; width: 100%; height: 100%; display: flex; flex-direction: column; justify-content: center; align-items: center; pointer-events: none; z-index: 700; padding: 0 5%; }
        h1 { text-align: center; color: var(--white); text-shadow: 0 4px 30px rgba(0,0,0,0.8); width: 100%; }
        .hero-title-container { display: flex; justify-content: center; gap: 1.5rem; width: 100%; }
        .hero-title { display: inline-block; font-family: var(--font-serif); font-weight: 400; font-style: italic; font-size: 6vw; line-height: 1; letter-spacing: -0.02em; transition: text-shadow 0.1s; }
        .hero-sub { display: block; font-family: var(--font-sans); font-size: 0.8vw; letter-spacing: 0.4em; margin-top: 25px; text-transform: uppercase; color: var(--gold); text-shadow: 0 2px 10px rgba(0,0,0,0.8); }

        /* Scroll & Audio */
        .scroll-indicator { position: absolute; bottom: 0; left: 60px; height: 140px; display: flex; flex-direction: row; align-items: flex-end; gap: 20px; z-index: 800; }
        .scroll-txt { writing-mode: vertical-rl; transform: rotate(180deg); color: var(--gold); font-size: 0.7rem; letter-spacing: 0.2em; text-transform: uppercase; margin-bottom: 30px; }
        .scroll-line { width: 1px; height: 100px; background: rgba(255,255,255,0.3); position: relative; overflow: hidden; }
        .scroll-fill { position: absolute; top: 0; left: 0; width: 100%; height: 100%; background: var(--gold); animation: drop 2s cubic-bezier(0.77, 0, 0.175, 1) infinite; }
        
        /* CORRECCIÓN 2: Z-INDEX ELEVADO PARA QUE SEA CLICKEABLE */
        .audio-toggle { 
            position: absolute; bottom: 40px; right: 60px; 
            display: flex; align-items: center; gap: 10px; 
            background: none; border: none; color: rgba(255,255,255,0.9); 
            font-family: var(--font-sans); font-size: 0.7rem; letter-spacing: 0.2em; 
            pointer-events: auto; transition: color 0.3s; z-index: 900; cursor: none;
        }
        .audio-toggle:hover { color: var(--gold); }
        .bars { display: flex; gap: 3px; align-items: flex-end; height: 14px; }
        .bar { width: 2px; height: 3px; background: currentColor; transition: height 0.2s; }
        .audio-toggle.active .bar:nth-child(1) { animation: eq 0.6s infinite ease-in-out; }
        .audio-toggle.active .bar:nth-child(2) { animation: eq 0.6s infinite 0.2s ease-in-out; }
        .audio-toggle.active .bar:nth-child(3) { animation: eq 0.6s infinite 0.1s ease-in-out; }

        /* Animation Keyframes */
        @keyframes orbitRight { 0% { stroke-dashoffset: 0; } 100% { stroke-dashoffset: -320; } }
        @keyframes drop { 0% {transform: translateY(-100%);} 100% {transform: translateY(100%);} }
        @keyframes eq { 0%, 100% { height: 3px; } 50% { height: 14px; } }
        @keyframes rotate3D { 0% { transform: rotateY(0deg); } 100% { transform: rotateY(360deg); } }
        @keyframes fadeUp { to { opacity: 1; transform: translateY(0); } }
        @keyframes spinNumber { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }

        /* Cursor */
        .cursor-dot { position: fixed; top: 0; left: 0; width: 12px; height: 12px; background: var(--gold); border-radius: 50%; pointer-events: none; z-index: 10009; transform: translate(-50%, -50%); box-shadow: 0 0 10px rgba(212, 175, 55, 0.8); }
        .cursor-circle { position: fixed; top: 0; left: 0; width: 48px; height: 48px; border: 1px solid rgba(212, 175, 55, 0.6); border-radius: 50%; pointer-events: none; z-index: 99999; transform: translate(-50%, -50%); transition: width 0.3s, height 0.3s, background 0.3s, border-color 0.3s; will-change: transform; }

        @media (max-width: 768px) {
            .nav-bar { padding: 30px; }
            .hero-title { font-size: 9vw; }
            .scroll-indicator { display: none; }
            .audio-toggle { bottom: 30px; right: 30px; }
        }


         <!-- ========================================= -->
        <!-- FUSION-->
        <!-- ========================================= -->

        body { overflow: hidden; background: #000; }

        .scene {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            transition: opacity 1s ease;
        }
        
        .scene.active { opacity: 1; z-index: 1; pointer-events: auto; }
        .scene.hidden { opacity: 0; z-index: 0; pointer-events: none; }
        
        /* Capa del Warp */
        .warp-layer {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            z-index: 10;
            pointer-events: none; /* Nadie lo toca */
            opacity: 0;
            mix-blend-mode: screen; /* Truco Pro: Elimina el fondo negro del video warp */
        }



        <!-- ========================================= -->
        <!-- ESCENA 2 -->
        <!-- ========================================= -->
        
          
        
    </style>
</head>
<body style="background-color: #000000;">

    <!-- 1. FONDO DE ESTRELLAS (Canvas separado para continuidad) -->
    <div id="loader-canvas-container">
        <canvas id="loader-canvas"></canvas>
    </div>

    <!-- 2. UI PRELOADER -->
    <div class="preloader" id="preloader">
        <div class="loader-content">
            <div class="loader-percent" id="loadText">0%</div>
            <div class="loader-line-wrap" id="loadLineWrap"><div class="loader-line-fill" id="loadFill"></div></div>
            <div class="loader-text">TEJIENDO EL ORIGEN</div>
        </div>
    </div>

    <main id="master-container">
         <section id="scene-material" class="scene active">
                 <!-- ========================================= -->
                <!-- ESCENA 1: HERO -->
                <!-- ========================================= -->
                
                <!-- 3. VIDEO BACKGROUND -->
                <div class="video-container">
                    <!-- preload="auto" para que esté listo al instante -->
                    <video id="bg-video" loop muted playsinline preload="auto">
                        <source src="https://pub-8275440e24554b96ad7dd640df0866b9.r2.dev/videos/ULULATOIA.mp4" type="video/mp4">
                    </video>
                    <div class="video-overlay"></div>
                </div>
            
                <!-- 4. WEBGL TÚNEL -->
                <div id="webgl-container"></div>
            
                <!-- 5. CAPA NEURAL -->
                <canvas id="neural-canvas"></canvas>
            
                <!-- 6. UI COMPLETA -->
                <nav class="nav-bar">
                    <div class="brand-logo-wrap">
                        <img src="https://pub-8275440e24554b96ad7dd640df0866b9.r2.dev/imagenes/Logo.png" alt="Ululato Logo" class="brand-logo-img">
                    </div>
                    <button class="menu-trigger" id="openMenu">
                        <div class="trigger-glow"></div>
                        <svg class="trigger-rings">
                            <rect class="ring ring-base" x="0" y="0" width="100%" height="100%"></rect>
                            <rect class="ring ring-gold" x="0" y="0" width="100%" height="100%"></rect>
                            <rect class="ring ring-light" x="0" y="0" width="100%" height="100%"></rect>
                        </svg>
                        <span class="trigger-text">Explorar</span>
                    </button>
                </nav>
            
                <!-- MENÚ COMPLETO -->
                <div class="menu-curtain" id="menuCurtain">
                    <div class="menu-atmosphere" id="menuAtmosphere"></div>
                    <button class="close-btn" id="closeMenu">
                        <svg width="14" height="14" viewBox="0 0 14 14" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M13 1L1 13M1 1L13 13" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/></svg>
                    </button>
                    <ul class="menu-list">
                        <li class="menu-item">
                            <a href="#" class="menu-link" data-color="rgba(34, 139, 34, 0.6)">
                                <div class="nav-number-wrap">
                                    <svg class="number-ring-svg" viewBox="0 0 50 50"><circle class="small-ring" cx="25" cy="25" r="20"></circle></svg>
                                    <span class="nav-number">01</span>
                                </div>
                                MANIFIESTO
                            </a>
                        </li>
                        <li class="menu-item">
                            <a href="#" class="menu-link" data-color="rgba(218, 165, 32, 0.6)">
                                <div class="nav-number-wrap">
                                    <svg class="number-ring-svg" viewBox="0 0 50 50"><circle class="small-ring" cx="25" cy="25" r="20"></circle></svg>
                                    <span class="nav-number">02</span>
                                </div>
                                COMUNIDADES
                            </a>
                        </li>
                        <li class="menu-item">
                            <a href="#" class="menu-link" data-color="rgba(178, 34, 34, 0.6)">
                                <div class="nav-number-wrap">
                                    <svg class="number-ring-svg" viewBox="0 0 50 50"><circle class="small-ring" cx="25" cy="25" r="20"></circle></svg>
                                    <span class="nav-number">03</span>
                                </div>
                                MERCADO
                            </a>
                        </li>
                        <li class="menu-item">
                            <a href="#" class="menu-link" data-color="rgba(0, 191, 255, 0.5)">
                                <div class="nav-number-wrap">
                                    <svg class="number-ring-svg" viewBox="0 0 50 50"><circle class="small-ring" cx="25" cy="25" r="20"></circle></svg>
                                    <span class="nav-number">04</span>
                                </div>
                                CONTACTO
                            </a>
                        </li>
                    </ul>
                </div>
            
                <main class="hero">
                    <h1>
                        <div class="hero-title-container">
                            <span class="hero-title" id="glitchTitle1">SOMOS</span>
                            <span class="hero-title" id="glitchTitle2">ORIGEN</span>
                        </div>
                        <span class="hero-sub">CONECTANDO LA SABIDURÍA ANCESTRAL CON EL FUTURO DIGITAL</span>
                    </h1>
                </main>
            
                <div class="scroll-indicator" id="scrollIndicator">
                    <span class="scroll-txt">Scroll para conectar</span>
                    <div class="scroll-line"><div class="scroll-fill"></div></div>
                </div>
            
                <!-- BOTÓN DE AUDIO (Corregido) -->
                <button class="audio-toggle" id="audioBtn">
                    <div class="bars"><div class="bar"></div><div class="bar"></div><div class="bar"></div></div> SONIDO
                </button>
         </section>
        
        
                <!-- ========================================= -->
            <!-- CAPA WARP (PUENTE DE TRANSICIÓN) -->
            <!-- ========================================= -->
            <div id="warp-layer">
                <!-- REEMPLAZA ESTE VIDEO POR TU EFECTO WARP/HIPERESPACIO -->
                <!-- Si no tienes uno, usa este placeholder o genera uno nuevo -->
                <video id="warp-video" muted playsinline>
                    <source src="https://assets.mixkit.co/videos/preview/mixkit-stars-in-space-1610-large.mp4" type="video/mp4">
                </video>
            </div>



         <!-- ========================================= -->
        <!-- ESCENA 2: DIGITAL (CINTAS) -->
        <!-- ========================================= -->

    
    <section id="scene-digital" class="scene hidden hero-inmersive">
             <!-- CAPA DE VIDEOS -->
            <div class="video-container">
                <!-- 1. INTRO -->
                <video id="vid-intro" class="active" muted playsinline preload="auto">
                    <source src="https://pub-8275440e24554b96ad7dd640df0866b9.r2.dev/videos/Tejido.mp4" type="video/mp4">
                </video>
            
                <!-- 2. LOOP (Bucle de las cintas) -->
                <video id="vid-loop" class="hidden" loop muted playsinline preload="auto">
                    <source src="https://pub-8275440e24554b96ad7dd640df0866b9.r2.dev/videos/Tejido2.mp4" type="video/mp4">
                </video>
            
                <!-- === CAPA DE VIDEOS HOVER === -->
            <!-- Están ocultos (opacity: 0) y pausados por defecto -->
            
            <video id="hover-yellow" class="video-layer hover-video"  muted playsinline preload="auto" data-loop-start="2" 
                   data-loop-end="4">
                <source src="https://pub-8275440e24554b96ad7dd640df0866b9.r2.dev/videos/HoverCintaYellow.mp4" type="video/mp4">
            </video>
            
            <video id="hover-blue" class="video-layer hover-video"  muted playsinline preload="auto" data-loop-start="3" 
                   data-loop-end="4">
                <source src="https://pub-8275440e24554b96ad7dd640df0866b9.r2.dev/videos/HoverCintaBlue.mp4" type="video/mp4">
            </video>
            
            <video id="hover-red" class="video-layer hover-video"  muted playsinline preload="auto" data-loop-start="3" 
                   data-loop-end="4">
                <source src="https://pub-8275440e24554b96ad7dd640df0866b9.r2.dev/videos/HoverCintaRed.mp4" type="video/mp4">
            </video>
            
            <video id="hover-green" class="video-layer hover-video"  muted playsinline preload="auto" data-loop-start="3" 
                   data-loop-end="4">
                <source src="https://pub-8275440e24554b96ad7dd640df0866b9.r2.dev/videos/HoverCintaGreen.mp4" type="video/mp4">
            </video>
        <!-- =================================== -->
            

                <!-- 4. TRANSICIÓN (Source dinámico) -->
                <video id="vid-transition" class="hidden" muted playsinline>
                    <!-- Se inyecta por JS -->
                </video>
          </div>

            <!-- 2. CAPA DE TEXTOS (Menú Flotante) -->
            <div class="text-overlay-layer">
                <div id="text-yellow" class="menu-label" data-color="Yellow"><span>Marketplace</span></div>
                <div id="text-blue"   class="menu-label" data-color="Blue"><span>Cursos Virtuales</span></div>
                <div id="text-red"    class="menu-label" data-color="Red"><span>Georeferenciación</span></div>
                <div id="text-green"  class="menu-label" data-color="Green"><span>Comunidad</span></div>
            </div>
            
            <div id="hero-cta" class="hero-cta">
                <h1>El Origen del Tejido</h1>
                <p>Explora los hilos para descubrir nuestra historia</p>
                <div class="mouse-icon"></div> <!-- Opcional: ícono de mouse/dedo -->
            </div>
        
            <div class="custom-cursor"></div>
            
                <!-- CAPA DE INTERACCIÓN SVG -->
                <!-- Ajusta el viewBox a la resolución nativa de tu video (ej: 1920 1080) -->
                <div class="interaction-layer" id="interaction-layer">
                    <svg viewBox="0 0 1920 1080" preserveAspectRatio="xMidYMid slice">
                        
                        <!-- IMPORTANTE: Reemplaza los atributos d="..." con tus trazados reales -->
                        
                        <!-- CINTA AMARILLA -->
                        <path id="zone-yellow" class="interaction-zone" 
                              data-color="Yellow" data-url="https://virtuala-soft.github.io/earth/dsc/wayuu/amarilla.html" data-text-id="text-yellow" data-hover-id="hover-yellow"
                              d="M1414,412c-9-1-277,8-277,8s-307-14-307-14c0,0-293.57,8-293.29,14s-48.71,7-48.71,13,167,99,167,99l200,90,157,84,97,49,24,14-11,36s-21,41-27,41-145-45.56-144-44.78-119-40.22-119-40.22l-152-86-182-95-85-48-45-86-34-82,22.55-22.55h66.2l62.25-23.45h121.95l221.05,18,113-4s133,11,138,16,172,5,172,5l113,8h71.17l-21.17,51Z"></path>
                        
                        <!-- CINTA AZUL -->
                        <path id="zone-blue" class="interaction-zone" 
                              data-color="Blue" data-url="https://virtuala-soft.github.io/earth/dsc/wayuu/azul.html" data-text-id="text-blue" data-hover-id="hover-blue"
                              d="M747,319l69.05,69.05,157.95,94.95,138,110,130,118,20.44,20.44s-95.44-15.44-102.44-15.44-96-55-96-55l-87-67-168.21-168.21-49.79-73.79-76-74-24,8,42,74,105,138,102,93,108,95,137,81,98,33,49,9,16-38-5-81-119.66-142.5-145.34-112.5-155-121-104-63-112-14-10,30,82,52Z"></path>
                
                        <!-- CINTA ROJA -->
                        <path id="zone-red" class="interaction-zone" 
                              data-color="Red" data-url="https://virtuala-soft.github.io/earth/dsc/wayuu/roja.html" data-text-id="text-red" data-hover-id="hover-red"
                              d="M648,814l-13-71s11-40,18-41,71-62,71-62l147-124,181-169,158-133,75-42,44,67v30.84l-128,105.16-76.15,76.15-94.85,83.85-170,138-138,106-18,45-35,12-21-22Z"></path>
                
                        <!-- CINTA VERDE -->
                        <path id="zone-green" class="interaction-zone" data-text-id="text-green" data-hover-id="hover-green"
                              data-color="Green" data-url="https://virtuala-soft.github.io/earth/dsc/wayuu/verde.html"
                              d="M811,820l142-74s197-80,208-85,189-100,189-100l128-86-269-37-138-24-188,32-171,36h-109.03l-37.97,1-11-45,91.38-24s217.62-29,217.62-29,183-10,179-9,206.32-1,206.32-1l144.68,7,99,3,45,19,41,59,16,53-13,53-53,40-106,62-217,104-110,51-121,40-94,28-58-28-24-36,13-10Z"></path>
                
                    </svg>
                </div>

      </section>
    
    
        <div class="cursor-dot"></div>
        <div class="cursor-circle"></div>

 </main>



    
    <script>
        // ==========================================
        // 1. ESTRELLAS: 2D Canvas (CONTINUIDAD FLUIDA)
        // ==========================================
        const starCanvas = document.getElementById('loader-canvas');
        const sCtx = starCanvas.getContext('2d');
        const starContainer = document.getElementById('loader-canvas-container');
        let width, height, stars = [], loadProgress = 0, isWarping = false;
        
        function initStars() {
            width = starCanvas.width = window.innerWidth; 
            height = starCanvas.height = window.innerHeight;
            stars = [];
            for(let i=0; i<400; i++) {
                stars.push({
                    x: Math.random() * width - width / 2,
                    y: Math.random() * height - height / 2,
                    z: Math.random() * width,
                    color: Math.random() > 0.5 ? '#D4AF37' : '#00F0FF',
                    size: Math.random() * 2
                });
            }
        }
        
        let starAnimId;
        function animateStars() {
            // Fondo ligeramente transparente en Warp para crear estelas, pero siempre base negra
            sCtx.fillStyle = isWarping ? 'rgba(0, 0, 0, 0.2)' : 'rgba(0, 0, 0, 1)'; 
            sCtx.fillRect(0, 0, width, height);
            
            stars.forEach(s => {
                let speed = 2 + (loadProgress * 2.0);
                if(isWarping) speed = 80; // Aceleración suave
                
                s.z -= speed;
                if (s.z <= 0) { 
                    s.z = width; 
                    s.x = Math.random() * width - width / 2; 
                    s.y = Math.random() * height - height / 2; 
                }
                
                let x = (s.x / s.z) * width + width / 2;
                let y = (s.y / s.z) * height + height / 2;
                
                let r = (1 - s.z / width) * s.size * 2;
                if(isWarping) r *= 1.5; 

                sCtx.beginPath();
                sCtx.arc(x, y, r, 0, Math.PI*2);
                sCtx.fillStyle = s.color;
                sCtx.fill();
            });
            starAnimId = requestAnimationFrame(animateStars);
        }

        window.addEventListener('resize', initStars);
        initStars();
        animateStars();

        // LOGICA DE CARGA & INICIO DE FUSIÓN
        const loadText = document.getElementById('loadText');
        const loadFill = document.getElementById('loadFill');
        const loadWrap = document.getElementById('loadLineWrap');
        const preloader = document.getElementById('preloader');

        function simLoad() {
            let increment = Math.random() * 0.5; 
            loadProgress += increment;
            
            if (loadProgress >= 100) {
                loadProgress = 100;
                isWarping = true; // Activar Warp
                preloader.classList.add('text-fade-out');
                
                // ARRANCAR TÚNEL INMEDIATAMENTE
                initTunnelAnimation(); 

            } else {
                loadText.innerText = Math.floor(loadProgress) + '%';
                loadWrap.style.width = Math.min(loadProgress * 3, 250) + 'px'; 
                loadFill.style.width = loadProgress + '%';
                requestAnimationFrame(simLoad);
            }
        }
        requestAnimationFrame(simLoad);


        // ==========================================
        // 2. TÚNEL DE HUMO & VIDEO TIME-FREEZE
        // ==========================================
        function initTunnelAnimation() {
            const CONFIG = {
                duration: 4.5,            // Duración viaje
                fadeStart: 3.0,           // Inicio revelación visual
                fadeEnd: 4.0,             // Fin del humo
                speed: 3500,              // Velocidad de nubes
                innerRadius: 140, radiusVar: 220, count: 350, stretch: 12
            };

            const video = document.getElementById('bg-video');
            video.pause(); video.currentTime = 0; // Video congelado

            let scene, camera, renderer, clouds = [], clock = new THREE.Clock();
            let hasTriggeredFade = false;
            let hasTriggeredPlay = false;

            const textureLoader = new THREE.TextureLoader();
            textureLoader.load("https://raw.githubusercontent.com/navin-navi/codepen-assets/master/images/smoke.png", (texture) => {
                
                // 1. Mostrar WebGL (sobre estrellas)
                const glContainer = document.getElementById("webgl-container");
                glContainer.classList.add('active'); 
                
                // 2. Desvanecer Estrellas
                setTimeout(() => {
                    starContainer.classList.add('fade-out');
                    setTimeout(() => cancelAnimationFrame(starAnimId), 2000); 
                }, 800);

                scene = new THREE.Scene();
                camera = new THREE.PerspectiveCamera(90, window.innerWidth / window.innerHeight, 1, 10000);
                camera.position.z = 1000;

                const ambient = new THREE.AmbientLight(0x555555); scene.add(ambient);
                const light = new THREE.PointLight(0xffffff, 5, 1000); light.position.set(0,0,-2000); scene.add(light);

                const mat = new THREE.MeshLambertMaterial({
                    map: texture, transparent: true, opacity: 1, blending: THREE.AdditiveBlending, depthWrite: false, side: THREE.DoubleSide
                });
                const geo = new THREE.PlaneBufferGeometry(400,400);

                for(let i=0; i<CONFIG.count; i++) {
                    let c = new THREE.Mesh(geo, mat.clone());
                    let z = (Math.random()*10000)-5000;
                    let a = Math.random()*Math.PI*2;
                    let r = CONFIG.innerRadius + (Math.random()*CONFIG.radiusVar);
                    c.position.set(Math.cos(a)*r, Math.sin(a)*r, z);
                    c.rotation.z = Math.random()*360;
                    c.scale.set(1.5, 1.5, CONFIG.stretch);
                    if(Math.random()>0.5) c.material.color.setHex(0x00aaff); else c.material.color.setHex(0xffaa00);
                    c.userData = { r: r, a: a };
                    clouds.push(c); scene.add(c);
                }

                renderer = new THREE.WebGLRenderer({ alpha: true, antialias: true, powerPreference: "high-performance" });
                renderer.setSize(window.innerWidth, window.innerHeight);
                renderer.setClearColor(0x000000, 0); 
                glContainer.appendChild(renderer.domElement);

                function animate() {
                    let elapsed = clock.getElapsedTime();
                    
                    camera.position.z -= CONFIG.speed * 0.016;
                    clouds.forEach(c => { if(c.position.z > camera.position.z + 500) c.position.z -= 10000; });
                    camera.position.x = (Math.random()-0.5)*10; camera.position.y = (Math.random()-0.5)*10;
                    scene.rotation.z += 0.003;

                    // A. FADE VISUAL (3.0s)
                    if (elapsed > CONFIG.fadeStart) {
                        if (!hasTriggeredFade) {
                            document.body.classList.add('reveal-video');
                            hasTriggeredFade = true;
                        }

                        let progress = (elapsed - CONFIG.fadeStart) / (CONFIG.fadeEnd - CONFIG.fadeStart);
                        progress = Math.min(progress, 1);
                        let expansion = Math.pow(progress, 3) * 3000;

                        clouds.forEach(c => {
                            let r = c.userData.r + expansion;
                            c.position.x = Math.cos(c.userData.a) * r;
                            c.position.y = Math.sin(c.userData.a) * r;
                            c.scale.z = THREE.MathUtils.lerp(CONFIG.stretch, 1, progress);
                            c.material.opacity = 1 * (1 - progress);
                        });
                    }

                    // B. PLAY VIDEO (3.5s)
                    if (elapsed > (CONFIG.fadeEnd - 0.5) && !hasTriggeredPlay) {
                        const pref = localStorage.getItem('ululato_sound_pref');
                        // Si el usuario ya activó el sonido antes, aseguramos que suene
                        if (pref === 'on') { video.muted = false; video.volume = 1; audioBtn.classList.add('active'); }
                        video.play().catch(e => console.log("Auto-play blocked pending user interaction"));
                        hasTriggeredPlay = true;
                    }

                    // C. FINALIZAR
                    if (elapsed >= CONFIG.duration) {
                        finishIntro(renderer);
                        return;
                    }
                    
                    renderer.render(scene, camera);
                    requestAnimationFrame(animate);
                }
                animate();
            });
        }

        function finishIntro(renderer) {
            document.body.classList.add('loaded'); // Muestra UI
            initNeuralVeil(); 
            const container = document.getElementById('webgl-container');
            container.style.opacity = '0';
            setTimeout(() => { renderer.dispose(); container.remove(); }, 1000);
        }

        // ==========================================
        // 3. CAPA NEURAL
        // ==========================================
        const neuralCanvas = document.getElementById('neural-canvas');
        const nCtx = neuralCanvas.getContext('2d');
        let nW, nH, nodes = [], mouse = { x: null, y: null };
        function initNeuralVeil() { resizeNeural(); window.addEventListener('resize', resizeNeural); window.addEventListener('mousemove', (e) => { mouse.x = e.clientX; mouse.y = e.clientY; }); createNodes(); animateNeural(); }
        function resizeNeural() { nW = neuralCanvas.width = window.innerWidth; nH = neuralCanvas.height = window.innerHeight; }
        class Node {
            constructor() { this.x = Math.random() * nW; this.y = Math.random() * nH; this.vx = (Math.random() - 0.5) * 0.5; this.vy = (Math.random() - 0.5) * 0.5; this.size = Math.random() * 3 + 2; this.color = Math.random() > 0.7 ? 'rgba(0, 240, 255,' : 'rgba(255, 255, 255,'; }
            update() { this.x += this.vx; this.y += this.vy; if(this.x < 0 || this.x > nW) this.vx *= -1; if(this.y < 0 || this.y > nH) this.vy *= -1; }
            draw() {
                let dx = mouse.x - this.x; let dy = mouse.y - this.y; let dist = Math.sqrt(dx*dx + dy*dy);
                if(dist < 250) {
                    let alpha = (250 - dist) / 250; nCtx.beginPath(); nCtx.arc(this.x, this.y, this.size, 0, Math.PI*2); nCtx.fillStyle = this.color + (alpha * 0.8) + ')'; nCtx.fill();
                    nodes.forEach(other => { let odx = this.x - other.x; let ody = this.y - other.y; let odist = Math.sqrt(odx*odx + ody*ody); if(odist < 120) { nCtx.beginPath(); nCtx.moveTo(this.x, this.y); nCtx.lineTo(other.x, other.y); nCtx.strokeStyle = 'rgba(255, 255, 255,' + (alpha * (1 - odist/120) * 0.6) + ')'; nCtx.stroke(); } });
                }
            }
        }
        function createNodes() { nodes = []; for(let i=0; i<150; i++) nodes.push(new Node()); }
        function animateNeural() { nCtx.clearRect(0, 0, nW, nH); nodes.forEach(node => { node.update(); node.draw(); }); requestAnimationFrame(animateNeural); }

        // ==========================================
        // 4. UI INTERACTIONS (Menú, Audio, Cursor)
        // ==========================================
        const title1 = document.getElementById('glitchTitle1'), title2 = document.getElementById('glitchTitle2');
        let lastX = 0, skew = 0;
        window.addEventListener('mousemove', (e) => {
            let velocity = e.clientX - lastX; lastX = e.clientX; skew = Math.max(Math.min(velocity * 0.5, 10), -10);
            let rX = skew * 2; let cX = -skew * 2; const shadowStyle = `${rX}px 0 0 rgba(255, 50, 50, 0.6), ${cX}px 0 0 rgba(0, 240, 255, 0.6)`;
            if (Math.abs(skew) > 0.5) { title1.style.textShadow = shadowStyle; title2.style.textShadow = shadowStyle; } 
            else { title1.style.textShadow = "0 4px 30px rgba(0,0,0,0.8)"; title2.style.textShadow = "0 4px 30px rgba(0,0,0,0.8)"; }
        });

        const menu = document.getElementById('menuCurtain'), openBtn = document.getElementById('openMenu'), closeBtn = document.getElementById('closeMenu'), atmosphere = document.getElementById('menuAtmosphere'), links = document.querySelectorAll('.menu-link');
        openBtn.addEventListener('click', () => { menu.classList.add('active'); });
        closeBtn.addEventListener('click', () => { menu.classList.remove('active'); });
        links.forEach(l => {
            l.addEventListener('mouseenter', () => { atmosphere.style.setProperty('--active-color', l.getAttribute('data-color')); atmosphere.style.opacity = '1'; atmosphere.style.transform = 'scale(1.1)'; });
            l.addEventListener('mouseleave', () => { atmosphere.style.opacity = '0'; atmosphere.style.transform = 'scale(1)'; });
        });

        // --- 4. AUDIO INTELLIGENCE (NUEVO SISTEMA) ---
        const audioBtn = document.getElementById('audioBtn');
        const video = document.getElementById('bg-video');

        // Función para hacer Fade In suave del audio
        function fadeAudioIn() {
            if (!video.muted) return; // Si ya suena, no hacer nada
            
            video.muted = false;
            video.volume = 0;
            audioBtn.classList.add('active');
            
            // Guardar preferencia en memoria del navegador
            localStorage.setItem('ululato_sound_pref', 'on');

            let fade = setInterval(() => {
                if (video.volume < 0.9) {
                    video.volume += 0.05;
                } else {
                    clearInterval(fade);
                }
            }, 100);
        }

        // Lógica del Botón
        audioBtn.addEventListener('click', (e) => {
            e.stopPropagation(); // Evitar que dispare el click global
            if (video.muted) {
                fadeAudioIn();
            } else {
                video.muted = true;
                audioBtn.classList.remove('active');
                localStorage.setItem('ululato_sound_pref', 'off');
            }
        });

        // 1. INTENTO DE AUTOPLAY BASADO EN MEMORIA (Al cargar)
        function tryAutoPlay() {
            const pref = localStorage.getItem('ululato_sound_pref');
            if (pref === 'on') {
                // El navegador puede bloquear esto si no hay interacción previa
                video.muted = false;
                video.play().catch(error => {
                    // Si falla, volvemos a mute y esperamos clic
                    video.muted = true;
                    console.log("Autoplay bloqueado por navegador, esperando interacción.");
                });
                if (!video.muted) audioBtn.classList.add('active');
            }
        }

        // 2. ACTIVACIÓN POR PRIMERA INTERACCIÓN GLOBAL (El Truco)
        // Cualquier clic en el documento activará el sonido si está apagado
        function unlockAudio() {
            if (video.muted) {
                fadeAudioIn();
            }
            // Una vez activado, quitamos este "detector" para que no moleste
            document.removeEventListener('click', unlockAudio);
        }
        
        // Escuchamos cualquier clic en la página para activar el sonido
        document.addEventListener('click', unlockAudio);

        const dot = document.querySelector('.cursor-dot'), circle = document.querySelector('.cursor-circle');
        let cx=0, cy=0;
        window.addEventListener('mousemove', e => { 
            dot.style.left = e.clientX + 'px'; dot.style.top = e.clientY + 'px'; 
            const c = e.target.closest('a, button, .menu-trigger'); 
            if(c) { circle.style.width = '60px'; circle.style.height = '60px'; circle.style.backgroundColor = 'rgba(212, 175, 55, 0.1)'; circle.style.borderColor = 'var(--gold)'; } 
            else { circle.style.width = '40px'; circle.style.height = '40px'; circle.style.backgroundColor = 'transparent'; circle.style.borderColor = 'rgba(212, 175, 55, 0.6)'; } 
        });
        function ac() { cx+=(mouse.x-cx)*0.15; cy+=(mouse.y-cy)*0.15; circle.style.left=cx+'px'; circle.style.top=cy+'px'; requestAnimationFrame(ac); } ac();
    </script>
</body>
</html>
