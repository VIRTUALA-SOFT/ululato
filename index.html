<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ULULATO | Panoramic Vision</title>
    
    <!-- FUENTES PREMIUM -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Cinzel:ital,wght@0,400;0,600;1,400;1,600&family=Space+Grotesk:wght@300;400;500&display=swap" rel="stylesheet">

    <style>
        /* --- 0. VARIABLES --- */
        :root {
            --gold: #D4AF37;
            --cyan: #00F0FF;
            --white: #F4F4F4;
            --black: #020202;
            --font-serif: 'Cinzel', serif;
            --font-sans: 'Space Grotesk', sans-serif;
            --ease-lux: cubic-bezier(0.7, 0, 0.1, 1);
        }

        * { margin: 0; padding: 0; box-sizing: border-box; cursor: none; }

        body {
            background-color: var(--black);
            color: var(--white);
            font-family: var(--font-sans);
            height: 100vh;
            width: 100vw;
            overflow: hidden;
        }

        /* --- 1. PRELOADER --- */
        .preloader {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background-color: var(--black); z-index: 9999;
            display: flex; flex-direction: column; justify-content: center; align-items: center;
            transition: transform 1.5s var(--ease-lux), opacity 1s ease;
        }
        .preloader.finished { transform: translateY(-100%); }
        .preloader.text-fade-out .loader-content { opacity: 0; transform: scale(1.1); }
        
        #loader-canvas { position: absolute; top: 0; left: 0; width: 100%; height: 100%; z-index: 0; transition: opacity 1s ease; }
        .loader-content { position: relative; z-index: 2; text-align: center; mix-blend-mode: difference; transition: opacity 0.5s ease; }
        .loader-percent { font-family: var(--font-serif); font-size: 8vw; color: var(--gold); line-height: 1; opacity: 0; transform: translateY(20px); animation: fadeUp 0.8s forwards; }
        .loader-text { font-family: var(--font-sans); font-size: 0.8rem; letter-spacing: 0.4em; text-transform: uppercase; color: rgba(255, 255, 255, 0.8); margin-top: 20px; }
        .loader-line-wrap { width: 0px; height: 1px; background: rgba(255, 255, 255, 0.2); margin: 30px auto 0; position: relative; transition: width 0.1s linear; }
        .loader-line-fill { position: absolute; top: 0; left: 0; height: 100%; width: 0%; background: var(--gold); box-shadow: 0 0 20px var(--gold); }

        /* --- 2. VIDEO BACKGROUND --- */
        .video-container { position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: 0; }
        #bg-video { 
            width: 100%; height: 100%; 
            object-fit: cover; object-position: center;
            transform: scale(1.2); transition: transform 2.5s var(--ease-lux), opacity 1s ease; opacity: 0; 
        }
        .video-overlay { position: absolute; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.25); z-index: 1; }
        body.loaded #bg-video { transform: scale(1); opacity: 1; }

        /* --- 3. NEURAL VEIL (AR) --- */
        #neural-canvas {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            z-index: 2; pointer-events: none; opacity: 0; transition: opacity 2s ease;
            mix-blend-mode: screen; 
        }
        body.loaded #neural-canvas { opacity: 1; }

        /* --- 4. HEADER & LOGO --- */
        .nav-bar {
            position: absolute; top: 0; width: 100%; padding: 40px 60px;
            display: flex; justify-content: space-between; align-items: center;
            z-index: 20; 
        }
        
        .brand-logo-wrap {
            width: 70px; height: 70px;
            pointer-events: auto; perspective: 1000px;
            display: flex; align-items: center; justify-content: center;
        }

        .brand-logo-img {
            width: 100%; height: 100%; object-fit: contain;
            animation: rotate3D 20s linear infinite; transform-style: preserve-3d;
            filter: drop-shadow(0 0 5px rgba(212, 175, 55, 0.3)); 
        }
        @keyframes rotate3D { 0% { transform: rotateY(0deg); } 100% { transform: rotateY(360deg); } }

        /* --- 5. HERO TEXT (PANORAMIC LAYOUT) --- */
        .hero {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            display: flex; flex-direction: column; justify-content: center; align-items: center;
            pointer-events: none; z-index: 10;
            padding: 0 5%; /* Margen de seguridad */
        }
        h1 { 
            text-align: center; color: var(--white); 
            text-shadow: 0 4px 30px rgba(0,0,0,0.8);
            width: 100%;
        }
        
        /* TÍTULO EN UNA SOLA LÍNEA */
        .hero-title-container {
            display: flex; 
            justify-content: center; 
            gap: 1.5rem; /* Espacio entre SOMOS y ORIGEN */
            width: 100%;
        }

        .hero-title { 
            display: inline-block;
            font-family: var(--font-serif); 
            font-weight: 400; font-style: italic;
            font-size: 6vw; /* Tamaño fluido */
            line-height: 1;
            letter-spacing: -0.02em;
            white-space: nowrap; /* FUERZA UNA LINEA */
            transition: text-shadow 0.1s;
        }
        
        /* SUBTÍTULO EN UNA SOLA LÍNEA */
        .hero-sub { 
            display: block; 
            font-family: var(--font-sans); 
            font-size: 0.9vw; /* Tamaño relativo al ancho para que siempre quepa */
            letter-spacing: 0.4em; 
            margin-top: 25px; 
            text-transform: uppercase; 
            color: var(--gold); 
            text-shadow: 0 2px 10px rgba(0,0,0,0.8);
            white-space: nowrap; /* FUERZA UNA LINEA */
            width: 100%;
            text-align: center;
        }

        /* --- 6. ELEMENTOS UI --- */
        .nav-bar, .hero, .scroll-indicator, .audio-toggle { opacity: 0; transition: opacity 1.5s ease 1s, transform 1.5s var(--ease-lux) 1s; transform: translateY(30px); }
        body.loaded .nav-bar, body.loaded .hero, body.loaded .scroll-indicator, body.loaded .audio-toggle { opacity: 1; transform: translateY(0); }

        .menu-trigger { 
            position: relative; background: rgba(0,0,0,0.2); 
            border-radius: 50px; border: 1px solid rgba(255,255,255,0.3); 
            padding: 0; width: 150px; height: 44px; display: flex; justify-content: center; align-items: center; cursor: none; pointer-events: auto; 
            font-family: var(--font-sans); font-size: 0.75rem; letter-spacing: 0.2em; text-transform: uppercase; color: var(--white); 
            backdrop-filter: blur(5px);
        }
        .trigger-text { position: relative; z-index: 2; transition: letter-spacing 0.5s var(--ease-lux), color 0.3s; text-shadow: 0 2px 5px rgba(0,0,0,0.5); }
        .trigger-rings { position: absolute; top: 0; left: 0; width: 100%; height: 100%; pointer-events: none; overflow: visible; }
        .ring { fill: none; stroke-width: 1px; width: 100%; height: 100%; rx: 22px; ry: 22px; transition: all 0.5s var(--ease-lux); }
        .ring-base { stroke: rgba(255, 255, 255, 0.5); opacity: 1; }
        .ring-gold { stroke: var(--gold); stroke-dasharray: 40 280; stroke-dashoffset: 0; opacity: 0; transform-origin: center; }
        .ring-light { stroke: #fff; stroke-dasharray: 20 100; stroke-dashoffset: 0; opacity: 0; transform-origin: center; }
        .trigger-glow { position: absolute; top: 50%; left: 50%; width: 0%; height: 0%; background: radial-gradient(circle, rgba(212, 175, 55, 0.6) 0%, transparent 70%); transform: translate(-50%, -50%); transition: width 0.6s var(--ease-lux), height 0.6s var(--ease-lux); border-radius: 50%; z-index: 0; }
        .menu-trigger:hover { border-color: rgba(255,255,255,0); background: rgba(0,0,0,0.4); }
        .menu-trigger:hover .trigger-text { letter-spacing: 0.4em; color: #fff; text-shadow: 0 0 15px rgba(212, 175, 55, 1); }
        .menu-trigger:hover .ring-base { opacity: 0; }
        .menu-trigger:hover .ring-gold { opacity: 1; animation: orbitRight 4s linear infinite; }
        .menu-trigger:hover .ring-light { opacity: 0.8; animation: orbitLeft 3s linear infinite; }
        .menu-trigger:hover .trigger-glow { width: 140%; height: 200%; opacity: 0.8; }

        .menu-curtain { position: fixed; top: 0; left: 0; width: 100vw; height: 100vh; z-index: 99; background: radial-gradient(circle at center, rgba(0, 0, 0, 0.1) 0%, rgba(0, 0, 0, 0.95) 100%); backdrop-filter: blur(10px); -webkit-backdrop-filter: blur(10px); display: flex; flex-direction: column; justify-content: center; align-items: center; opacity: 0; pointer-events: none; transition: opacity 0.8s var(--ease-lux); }
        .menu-curtain.active { opacity: 1; pointer-events: auto; }
        .menu-atmosphere { position: absolute; top: 0; left: 0; width: 100%; height: 100%; z-index: -1; opacity: 0; background: radial-gradient(circle at center, var(--active-color, transparent) 0%, transparent 60%); mix-blend-mode: hard-light; transition: opacity 0.6s ease, transform 0.6s ease; pointer-events: none; }
        .menu-list { list-style: none; text-align: left; position: relative; z-index: 10; padding-left: 0; }
        .menu-item { margin: 15px 0; overflow: visible; position: relative; }
        .menu-link { text-decoration: none; display: flex; align-items: center; gap: 30px; font-family: var(--font-serif); font-size: 4rem; color: rgba(255,255,255,0.65); text-shadow: 0 4px 15px rgba(0,0,0,0.3); transition: all 0.4s var(--ease-lux); transform: translateY(100%); }
        .nav-number-wrap { position: relative; width: 40px; height: 40px; display: flex; justify-content: center; align-items: center; }
        .nav-number { font-family: var(--font-sans); font-size: 0.9rem; color: var(--gold); opacity: 0.8; z-index: 2; transition: all 0.3s; }
        .number-ring-svg { position: absolute; top: -5px; left: -5px; width: 50px; height: 50px; pointer-events: none; opacity: 0; transition: opacity 0.4s; animation: none; }
        .small-ring { fill: none; stroke: var(--gold); stroke-width: 1px; stroke-dasharray: 10 30; }
        .menu-link:hover { color: #fff; transform: translateX(20px); }
        .menu-link:hover .number-ring-svg { opacity: 1; animation: spinNumber 4s linear infinite; }
        .menu-link:hover .nav-number { color: #fff; text-shadow: 0 0 10px var(--gold); }
        .menu-curtain.active .menu-link { transform: translateY(0); }
        .menu-curtain.active .menu-item:nth-child(1) .menu-link { transition-delay: 0.1s; }
        .menu-curtain.active .menu-item:nth-child(2) .menu-link { transition-delay: 0.2s; }
        .menu-curtain.active .menu-item:nth-child(3) .menu-link { transition-delay: 0.3s; }
        .menu-curtain.active .menu-item:nth-child(4) .menu-link { transition-delay: 0.4s; }
        .close-btn { position: absolute; top: 40px; right: 60px; width: 50px; height: 50px; border: 1px solid rgba(255,255,255,0.3); border-radius: 50%; display: flex; justify-content: center; align-items: center; color: var(--white); transition: 0.3s; cursor: none; z-index: 100; }
        .close-btn:hover { border-color: var(--gold); color: var(--gold); transform: rotate(90deg); }

        .scroll-indicator { position: absolute; bottom: 0; left: 60px; height: 140px; display: flex; flex-direction: row; align-items: flex-end; gap: 20px; z-index: 15; transition: opacity 0.5s ease, transform 0.5s ease; opacity: 1; pointer-events: auto; padding-bottom: 0; }
        .scroll-indicator.hidden { opacity: 0; transform: translateY(20px); pointer-events: none; }
        .scroll-txt { writing-mode: vertical-rl; text-orientation: mixed; transform: rotate(180deg); color: var(--gold); font-size: 0.7rem; letter-spacing: 0.2em; text-transform: uppercase; opacity: 0.9; margin-bottom: 30px; text-shadow: 0 2px 5px black; }
        .scroll-line { width: 1px; height: 100px; background: rgba(255,255,255,0.3); position: relative; overflow: hidden; margin-bottom: 0; }
        .scroll-fill { position: absolute; top: 0; left: 0; width: 100%; height: 100%; background: var(--gold); animation: drop 2s cubic-bezier(0.77, 0, 0.175, 1) infinite; }
        
        .audio-toggle { position: absolute; bottom: 40px; right: 60px; display: flex; align-items: center; gap: 10px; background: none; border: none; color: rgba(255,255,255,0.9); font-family: var(--font-sans); font-size: 0.7rem; letter-spacing: 0.2em; pointer-events: auto; transition: color 0.3s; text-shadow: 0 2px 5px black; }
        .audio-toggle:hover { color: var(--gold); }
        .bars { display: flex; gap: 3px; align-items: flex-end; height: 14px; }
        .bar { width: 2px; height: 3px; background: currentColor; transition: height 0.2s; }
        .audio-toggle.active .bar:nth-child(1) { animation: eq 0.6s infinite ease-in-out; }
        .audio-toggle.active .bar:nth-child(2) { animation: eq 0.6s infinite 0.2s ease-in-out; }
        .audio-toggle.active .bar:nth-child(3) { animation: eq 0.6s infinite 0.1s ease-in-out; }

        @keyframes orbitRight { 0% { stroke-dashoffset: 0; } 100% { stroke-dashoffset: -320; } }
        @keyframes orbitLeft { 0% { stroke-dashoffset: 0; } 100% { stroke-dashoffset: 320; } }
        @keyframes drop { 0% {transform: translateY(-100%);} 100% {transform: translateY(100%);} }
        @keyframes eq { 0%, 100% { height: 3px; } 50% { height: 14px; } }
        @keyframes spinNumber { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
        @keyframes fadeUp { to { opacity: 1; transform: translateY(0); } }

        .cursor-dot { position: fixed; top: 0; left: 0; width: 8px; height: 8px; background: var(--gold); border-radius: 50%; pointer-events: none; z-index: 1000; transform: translate(-50%, -50%); mix-blend-mode: difference; }
        .cursor-circle { position: fixed; top: 0; left: 0; width: 40px; height: 40px; border: 1px solid rgba(255,255,255,0.4); border-radius: 50%; pointer-events: none; z-index: 999; transform: translate(-50%, -50%); transition: width 0.3s, height 0.3s, background 0.3s; }

        @media (max-width: 768px) {
            .nav-bar { padding: 30px; }
            .hero-title { font-size: 9vw; } /* Ajuste para móvil para mantener 1 linea */
            .hero-sub { font-size: 0.6rem; letter-spacing: 0.1em; white-space: normal; line-height: 1.4; } /* En móvil permitimos wrap si es necesario para leer */
            .menu-link { font-size: 2.2rem; flex-direction: column; gap: 10px; align-items: flex-start; }
            .scroll-indicator { display: none; }
            .audio-toggle { bottom: 30px; right: 30px; }
            .loader-percent { font-size: 15vw; }
            .brand-logo-wrap { width: 50px; height: 50px; }
        }
    </style>
</head>
<body>

    <!-- AUDIO FILE -->
   <!--<audio id="bg-audio" loop>
        <source src="https://cdn.pixabay.com/download/audio/2022/05/27/audio_1808fbf07a.mp3?filename=meditation-impulse-30741.mp3" type="audio/mpeg">
    </audio>-->

    <!-- PRELOADER -->
    <div class="preloader" id="preloader">
        <canvas id="loader-canvas"></canvas>
        <div class="loader-content">
            <div class="loader-percent" id="loadText">0%</div>
            <div class="loader-line-wrap" id="loadLineWrap"><div class="loader-line-fill" id="loadFill"></div></div>
            <div class="loader-text">TEJIENDO EL ORIGEN</div>
        </div>
    </div>

    <!-- VIDEO BACKGROUND -->
    <div class="video-container">
        <video id="bg-video" autoplay loop muted playsinline>
            <source src="https://pub-8275440e24554b96ad7dd640df0866b9.r2.dev/ULULATOIA.mp4" type="video/mp4">
        </video>
        <div class="video-overlay"></div>
    </div>

    <!-- NEURAL VEIL CANVAS -->
    <canvas id="neural-canvas"></canvas>

    <!-- UI -->
    <nav class="nav-bar">
        <!-- LOGO -->
        <div class="brand-logo-wrap">
            <img src="https://pub-8275440e24554b96ad7dd640df0866b9.r2.dev/imagenes/Logo.png" alt="Ululato Logo" class="brand-logo-img">
        </div>
        
        <button class="menu-trigger" id="openMenu">
            <div class="trigger-glow"></div>
            <svg class="trigger-rings">
                <rect class="ring ring-base" x="0" y="0" width="100%" height="100%"></rect>
                <rect class="ring ring-gold" x="0" y="0" width="100%" height="100%"></rect>
                <rect class="ring ring-light" x="0" y="0" width="100%" height="100%"></rect>
            </svg>
            <span class="trigger-text">Explorar</span>
        </button>
    </nav>

    <!-- MENU -->
    <div class="menu-curtain" id="menuCurtain">
        <div class="menu-atmosphere" id="menuAtmosphere"></div>
        <button class="close-btn" id="closeMenu">
            <svg width="14" height="14" viewBox="0 0 14 14" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M13 1L1 13M1 1L13 13" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/></svg>
        </button>
        <ul class="menu-list">
            <li class="menu-item"><a href="#" class="menu-link" data-color="rgba(34, 139, 34, 0.6)"><div class="nav-number-wrap"><svg class="number-ring-svg" viewBox="0 0 50 50"><circle class="small-ring" cx="25" cy="25" r="20"></circle></svg><span class="nav-number">01</span></div>MANIFIESTO</a></li>
            <li class="menu-item"><a href="#" class="menu-link" data-color="rgba(218, 165, 32, 0.6)"><div class="nav-number-wrap"><svg class="number-ring-svg" viewBox="0 0 50 50"><circle class="small-ring" cx="25" cy="25" r="20"></circle></svg><span class="nav-number">02</span></div>COMUNIDADES</a></li>
            <li class="menu-item"><a href="#" class="menu-link" data-color="rgba(178, 34, 34, 0.6)"><div class="nav-number-wrap"><svg class="number-ring-svg" viewBox="0 0 50 50"><circle class="small-ring" cx="25" cy="25" r="20"></circle></svg><span class="nav-number">03</span></div>MERCADO</a></li>
            <li class="menu-item"><a href="#" class="menu-link" data-color="rgba(0, 191, 255, 0.5)"><div class="nav-number-wrap"><svg class="number-ring-svg" viewBox="0 0 50 50"><circle class="small-ring" cx="25" cy="25" r="20"></circle></svg><span class="nav-number">04</span></div>CONTACTO</a></li>
        </ul>
    </div>

    <!-- HERO TEXT (ONE LINE PANORAMIC) -->
    <main class="hero">
        <h1>
            <div class="hero-title-container">
                <span class="hero-title" id="glitchTitle1">SOMOS</span>
                <span class="hero-title" id="glitchTitle2">ORIGEN</span>
            </div>
            <span class="hero-sub">CONECTANDO LA SABIDURÍA ANCESTRAL CON EL FUTURO DIGITAL</span>
        </h1>
    </main>

    <div class="scroll-indicator" id="scrollIndicator">
        <span class="scroll-txt">Scroll para conectar</span>
        <div class="scroll-line"><div class="scroll-fill"></div></div>
    </div>

    <button class="audio-toggle" id="audioBtn">
        <div class="bars"><div class="bar"></div><div class="bar"></div><div class="bar"></div></div> SONIDO
    </button>

    <div class="cursor-dot"></div>
    <div class="cursor-circle"></div>

    <script>
        // --- 1. PRELOADER (GRADUAL ACCELERATION) ---
        const canvas = document.getElementById('loader-canvas');
        const ctx = canvas.getContext('2d');
        let width, height, stars = [], loadProgress = 0, isExploding = false;
        function resizeCanvas() { width = canvas.width = window.innerWidth; height = canvas.height = window.innerHeight; initStars(); }
        class Star {
            constructor() { this.x = Math.random() * width - width / 2; this.y = Math.random() * height - height / 2; this.z = Math.random() * width; this.color = Math.random() > 0.5 ? '#D4AF37' : '#00F0FF'; this.size = Math.random() * 2; }
            update() { 
                // ACELERACIÓN GRADUAL BASADA EN EL PROGRESO
                // Al 0% speed = 2. Al 100% speed = 52.
                let speed = 2 + (loadProgress * 0.5);
                if(isExploding) speed = 100; // Warp final

                this.z -= speed; 
                if (this.z <= 0) { this.z = width; this.x = Math.random() * width - width / 2; this.y = Math.random() * height - height / 2; } 
            }
            draw() { 
                let x = (this.x / this.z) * width + width / 2; let y = (this.y / this.z) * height + height / 2; 
                let r = (1 - this.z / width) * this.size * 2; 
                // Estiramiento visual también gradual
                let trail = isExploding ? 5 : (1 - this.z / width) * (loadProgress * 0.5); 
                
                ctx.beginPath(); ctx.moveTo(x, y); ctx.lineTo(x - (x - width/2) * (trail * 0.01), y - (y - height/2) * (trail * 0.01)); ctx.strokeStyle = this.color; ctx.lineWidth = r; if (isExploding) ctx.globalAlpha = 0.5; ctx.stroke(); ctx.globalAlpha = 1; 
            }
        }
        function initStars() { stars = []; for(let i=0; i<400; i++) stars.push(new Star()); }
        let animId;
        function animateStars() { ctx.fillStyle = 'rgba(2, 2, 2, 0.4)'; ctx.fillRect(0, 0, width, height); stars.forEach(s => { s.update(); s.draw(); }); animId = requestAnimationFrame(animateStars); }
        window.addEventListener('resize', resizeCanvas); resizeCanvas(); animateStars();

        const loadText = document.getElementById('loadText'), loadFill = document.getElementById('loadFill'), loadWrap = document.getElementById('loadLineWrap'), preloader = document.getElementById('preloader');
        function simLoad() {
            // CARGA MAS RÁPIDA (Incremento 1.5 en vez de 0.4)
            let increment = Math.random() * 1.5; 
            loadProgress += increment;
            
            if (loadProgress >= 100) {
                loadProgress = 100; isExploding = true; preloader.classList.add('text-fade-out');
                setTimeout(() => { preloader.classList.add('finished'); document.body.classList.add('loaded'); setTimeout(() => cancelAnimationFrame(animId), 2000); initNeuralVeil(); }, 800);
            } else {
                loadText.innerText = Math.floor(loadProgress) + '%';
                loadWrap.style.width = Math.min(loadProgress * 3, 250) + 'px'; loadFill.style.width = loadProgress + '%';
                requestAnimationFrame(simLoad);
            }
        }
        setTimeout(() => requestAnimationFrame(simLoad), 500);

        // --- 2. NEURAL VEIL (AR) ---
        const neuralCanvas = document.getElementById('neural-canvas');
        const nCtx = neuralCanvas.getContext('2d');
        let nW, nH, nodes = [];
        let mouse = { x: null, y: null };
        function initNeuralVeil() { resizeNeural(); window.addEventListener('resize', resizeNeural); window.addEventListener('mousemove', (e) => { mouse.x = e.clientX; mouse.y = e.clientY; }); createNodes(); animateNeural(); }
        function resizeNeural() { nW = neuralCanvas.width = window.innerWidth; nH = neuralCanvas.height = window.innerHeight; }
        class Node {
            constructor() {
                this.x = Math.random() * nW; this.y = Math.random() * nH;
                this.vx = (Math.random() - 0.5) * 0.5; this.vy = (Math.random() - 0.5) * 0.5;
                this.size = Math.random() * 3 + 2; 
                this.color = Math.random() > 0.7 ? 'rgba(0, 240, 255,' : 'rgba(255, 255, 255,'; 
            }
            update() { this.x += this.vx; this.y += this.vy; if(this.x < 0 || this.x > nW) this.vx *= -1; if(this.y < 0 || this.y > nH) this.vy *= -1; }
            draw() {
                let dx = mouse.x - this.x; let dy = mouse.y - this.y; let dist = Math.sqrt(dx*dx + dy*dy);
                if(dist < 250) {
                    let alpha = (250 - dist) / 250;
                    nCtx.beginPath(); nCtx.arc(this.x, this.y, this.size, 0, Math.PI*2);
                    nCtx.fillStyle = this.color + (alpha * 0.8) + ')'; 
                    nCtx.shadowBlur = 10; nCtx.shadowColor = this.color.includes('0, 240') ? '#00F0FF' : '#FFFFFF';
                    nCtx.fill(); nCtx.shadowBlur = 0;
                    nodes.forEach(other => {
                        let odx = this.x - other.x; let ody = this.y - other.y; let odist = Math.sqrt(odx*odx + ody*ody);
                        if(odist < 120) {
                            nCtx.beginPath(); nCtx.moveTo(this.x, this.y); nCtx.lineTo(other.x, other.y);
                            nCtx.strokeStyle = 'rgba(255, 255, 255,' + (alpha * (1 - odist/120) * 0.6) + ')';
                            nCtx.lineWidth =  2.5 - (odist / 120);  
                            nCtx.stroke();
                        }
                    });
                }
            }
        }
        function createNodes() { nodes = []; for(let i=0; i<150; i++) nodes.push(new Node()); }
        function animateNeural() { nCtx.clearRect(0, 0, nW, nH); nodes.forEach(node => { node.update(); node.draw(); }); requestAnimationFrame(animateNeural); }

        // --- 3. UI LOGIC ---
        const title1 = document.getElementById('glitchTitle1'), title2 = document.getElementById('glitchTitle2');
        let lastX = 0, skew = 0;
        window.addEventListener('mousemove', (e) => {
            let velocity = e.clientX - lastX; lastX = e.clientX; skew = Math.max(Math.min(velocity * 0.5, 10), -10);
            let rX = skew * 2; let cX = -skew * 2; const shadowStyle = `${rX}px 0 0 rgba(255, 50, 50, 0.6), ${cX}px 0 0 rgba(0, 240, 255, 0.6)`;
            if (Math.abs(skew) > 0.5) { title1.style.textShadow = shadowStyle; title2.style.textShadow = shadowStyle; } 
            else { title1.style.textShadow = "0 4px 30px rgba(0,0,0,0.8)"; title2.style.textShadow = "0 4px 30px rgba(0,0,0,0.8)"; }
        });

        const menu = document.getElementById('menuCurtain'), openBtn = document.getElementById('openMenu'), closeBtn = document.getElementById('closeMenu'), atmosphere = document.getElementById('menuAtmosphere'), links = document.querySelectorAll('.menu-link'), scrollInd = document.getElementById('scrollIndicator');
        openBtn.addEventListener('click', () => { menu.classList.add('active'); scrollInd.classList.add('hidden'); });
        closeBtn.addEventListener('click', () => { menu.classList.remove('active'); scrollInd.classList.remove('hidden'); });
        links.forEach(l => {
            l.addEventListener('mouseenter', () => { atmosphere.style.setProperty('--active-color', l.getAttribute('data-color')); atmosphere.style.opacity = '1'; atmosphere.style.transform = 'scale(1.1)'; });
            l.addEventListener('mouseleave', () => { atmosphere.style.opacity = '0'; atmosphere.style.transform = 'scale(1)'; });
            l.addEventListener('click', () => { menu.classList.remove('active'); scrollInd.classList.remove('hidden'); });
        });

        // --- 4. AUDIO CONTROL (INTEGRADO AL VIDEO) ---
        const audioBtn = document.getElementById('audioBtn');
        const video = document.getElementById('bg-video'); // Selector del Video de Fondo

        audioBtn.addEventListener('click', () => {
            if (video.muted) {
                // Activar Sonido (Unmute)
                video.muted = false;
                video.volume = 0; // Iniciar en 0
                audioBtn.classList.add('active');

                // Fade In Effect (Subida gradual)
                let vol = 0;
                let fadeInterval = setInterval(() => {
                    if (vol < 0.9) {
                        vol += 0.05;
                        video.volume = vol;
                    } else {
                        clearInterval(fadeInterval);
                    }
                }, 100);
            } else {
                // Desactivar Sonido (Mute)
                video.muted = true;
                audioBtn.classList.remove('active');
            }
        });

        const dot = document.querySelector('.cursor-dot'), circle = document.querySelector('.cursor-circle');
        let cx=0, cy=0;
        window.addEventListener('mousemove', e => { dot.style.left = e.clientX+'px'; dot.style.top = e.clientY+'px'; const c = e.target.closest('a, button'); if(c) { circle.style.width='60px'; circle.style.height='60px'; circle.style.borderColor='var(--gold)'; } else { circle.style.width='40px'; circle.style.height='40px'; circle.style.borderColor='rgba(255,255,255,0.4)'; } });
        function ac() { cx+=(lastX-cx)*0.15; cy+=(mouse.y-cy)*0.15; circle.style.left=cx+'px'; circle.style.top=cy+'px'; requestAnimationFrame(ac); } ac();
    </script>
</body>
</html>
